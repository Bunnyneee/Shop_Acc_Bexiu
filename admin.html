<!-- admin.html -->
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ÄÄƒng nháº­p Admin</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      font-family: 'Quicksand', sans-serif;
      background-color: #fff0f5;
      padding: 2rem;
    }
    h1 {
      text-align: center;
      color: #ff66aa;
    }
    .hidden { display: none; }
    .login-box, .acc-form, .acc-list {
      background: #fff;
      padding: 1rem;
      border-radius: 12px;
      margin: 1rem auto;
      max-width: 600px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    input, select, textarea, button {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.5rem;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #ff66aa;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    .acc-item {
      background: #ffe6f0;
      margin-bottom: 1rem;
      padding: 1rem;
      border-radius: 12px;
    }
    .acc-item img {
      max-width: 100px;
      margin-right: 0.5rem;
    }
  </style>
</head>
<body>
  <h1>Trang Quáº£n Trá»‹</h1>

  <div class="login-box" id="loginBox">
    <h2>ÄÄƒng nháº­p Admin</h2>
    <input type="password" id="adminPass" placeholder="Nháº­p máº­t kháº©u">
    <button onclick="loginAdmin()">ÄÄƒng nháº­p</button>
  </div>

  <div class="acc-form hidden" id="formBox">
    <h2>ThÃªm acc má»›i</h2>
    <label>Level: <input type="number" id="level"></label>
    <label>Rank: <input type="text" id="rank"></label>
    <label>LiÃªn káº¿t:
      <select id="link1">
        <option value="">-- Chá»n liÃªn káº¿t 1 --</option>
        <option>Gmail</option>
        <option>Facebook</option>
        <option>Facebook Die</option>
        <option>Game Center</option>
      </select>
      <select id="link2">
        <option value="">-- Chá»n liÃªn káº¿t 2 --</option>
        <option>Gmail</option>
        <option>Facebook</option>
        <option>Facebook Die</option>
        <option>Game Center</option>
      </select>
    </label>
    <label>áº¢nh (tá»‘i Ä‘a 20 áº£nh, tÃªn file pháº£i tá»“n táº¡i trong images/):
      <textarea id="images" placeholder="Nháº­p tÃªn file cÃ¡ch nhau bá»Ÿi dáº¥u xuá»‘ng dÃ²ng"></textarea>
    </label>
    <button onclick="submitAcc()">ThÃªm acc</button>
  </div>

  <div class="acc-list hidden" id="listBox">
    <h2>Danh sÃ¡ch acc</h2>
    <div id="adminList"></div>
  </div>

  <script src="script.js"></script>
  <script>
    const ADMIN_PASSWORD = 'bexiu2025'; // ğŸ” Máº­t kháº©u admin á»Ÿ Ä‘Ã¢y

    function loginAdmin() {
      const input = document.getElementById('adminPass').value;
      if (input === ADMIN_PASSWORD) {
        document.getElementById('loginBox').style.display = 'none';
        document.getElementById('formBox').classList.remove('hidden');
        document.getElementById('listBox').classList.remove('hidden');
        loadAdminList();
      } else {
        alert('Sai máº­t kháº©u!');
      }
    }

    async function submitAcc() {
      const level = +document.getElementById('level').value;
      const rank = document.getElementById('rank').value.trim();
      const link1 = document.getElementById('link1').value;
      const link2 = document.getElementById('link2').value;
      const imagesText = document.getElementById('images').value.trim();

      if (!level || !link1 || !imagesText) return alert('Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin!');
      const links = [link1];
      if (link2 && link2 !== link1) links.push(link2);

      const images = imagesText.split(/\n|\r/).map(img => `images/${img.trim()}`).filter(x => x);
      if (images.length > 20) return alert('Tá»‘i Ä‘a 20 áº£nh!');

      const acc = { level, rank, links, images, sold: false };
      await addAcc(acc);
      alert('ÄÃ£ thÃªm acc má»›i!');
      loadAdminList();
    }

    async function loadAdminList() {
      const { accs } = await loadAccs();
      const wrap = document.getElementById('adminList');
      wrap.innerHTML = '';

      accs.forEach(acc => {
        const div = document.createElement('div');
        div.className = 'acc-item';
        div.innerHTML = `
          <strong>ID #${acc.id}</strong><br>
          Level: ${acc.level} | Rank: ${acc.rank}<br>
          LiÃªn káº¿t: ${acc.links.join(', ')}<br>
          <img src="${acc.images[0]}" alt="img">
          <br>
          <button onclick="deleteAcc(${acc.id}).then(loadAdminList)">ğŸ—‘ XoÃ¡</button>
          <button onclick="markSold(${acc.id}).then(loadAdminList)">âœ… ÄÃ¡nh dáº¥u Ä‘Ã£ bÃ¡n</button>
        `;
        wrap.appendChild(div);
      });
    }
  </script>
</body>
</html>
