<!-- admin.html -->
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Qu·∫£n tr·ªã Shop Acc</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      font-family: 'Quicksand', sans-serif;
      background-color: #fff0f5;
      padding: 2rem;
    }
    h1 {
      text-align: center;
      color: #ff66aa;
    }
    .acc-form, .acc-list {
      background: #fff;
      padding: 1rem;
      border-radius: 12px;
      margin-bottom: 2rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 0.5rem;
      font-weight: bold;
    }
    input, select, textarea {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.3rem;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 8px;
      background-color: #ff66aa;
      color: white;
      cursor: pointer;
    }
    .acc-item {
      background: #ffe6f0;
      margin-bottom: 1rem;
      padding: 1rem;
      border-radius: 12px;
    }
    .acc-item img {
      max-width: 100px;
      margin-right: 0.5rem;
    }
  </style>
</head>
<body>
  <h1>Qu·∫£n tr·ªã Shop Acc</h1>

  <div class="acc-form">
    <h2>Th√™m acc m·ªõi</h2>
    <label>Level: <input type="number" id="level"></label>
    <label>Rank: <input type="text" id="rank"></label>
    <label>Li√™n k·∫øt:
      <select id="link1">
        <option value="">-- Ch·ªçn li√™n k·∫øt 1 --</option>
        <option>Gmail</option>
        <option>Facebook</option>
        <option>Facebook Die</option>
        <option>Game Center</option>
      </select>
      <select id="link2">
        <option value="">-- Ch·ªçn li√™n k·∫øt 2 --</option>
        <option>Gmail</option>
        <option>Facebook</option>
        <option>Facebook Die</option>
        <option>Game Center</option>
      </select>
    </label>
    <label>·∫¢nh (t·ªëi ƒëa 20 ·∫£nh, t√™n file ph·∫£i t·ªìn t·∫°i trong images/):
      <textarea id="images" placeholder="Nh·∫≠p t√™n file c√°ch nhau b·ªüi d·∫•u xu·ªëng d√≤ng"></textarea>
    </label>
    <button onclick="submitAcc()">Th√™m acc</button>
  </div>

  <div class="acc-list">
    <h2>Danh s√°ch acc</h2>
    <div id="adminList"></div>
  </div>

  <script src="script.js"></script>
  <script>
    async function submitAcc() {
      const level = +document.getElementById('level').value;
      const rank = document.getElementById('rank').value.trim();
      const link1 = document.getElementById('link1').value;
      const link2 = document.getElementById('link2').value;
      const imagesText = document.getElementById('images').value.trim();

      if (!level || !link1 || !imagesText) return alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!');
      const links = [link1];
      if (link2 && link2 !== link1) links.push(link2);

      const images = imagesText.split(/\n|\r/).map(img => `images/${img.trim()}`).filter(x => x);
      if (images.length > 20) return alert('T·ªëi ƒëa 20 ·∫£nh!');

      const acc = { level, rank, links, images, sold: false };
      await addAcc(acc);
      alert('ƒê√£ th√™m acc m·ªõi!');
      loadAdminList();
    }

    async function loadAdminList() {
      const { accs } = await loadAccs();
      const wrap = document.getElementById('adminList');
      wrap.innerHTML = '';

      accs.forEach(acc => {
        const div = document.createElement('div');
        div.className = 'acc-item';
        div.innerHTML = `
          <strong>ID #${acc.id}</strong><br>
          Level: ${acc.level} | Rank: ${acc.rank}<br>
          Li√™n k·∫øt: ${acc.links.join(', ')}<br>
          <img src="${acc.images[0]}" alt="img">
          <br>
          <button onclick="deleteAcc(${acc.id}).then(loadAdminList)">üóë Xo√°</button>
          <button onclick="markSold(${acc.id}).then(loadAdminList)">‚úÖ ƒê√°nh d·∫•u ƒë√£ b√°n</button>
        `;
        wrap.appendChild(div);
      });
    }

    loadAdminList();
  </script>
</body>
</html>
